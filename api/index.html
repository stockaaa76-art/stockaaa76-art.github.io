<!doctype html><html lang=ja><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>API仕様書 | 株価アート - Stock Analysis Dashboard</title><meta name=description content="株価データAPIの使用方法とサンプルコード"><meta name=keywords content="株価,投資,分析,ダッシュボード,日経平均,チャート"><meta name=author content="stockaaa76-art"><meta name=google-adsense-account content="ca-pub-8563231513969804"><meta property="og:title" content="API仕様書"><meta property="og:description" content="株価データAPIの使用方法とサンプルコード"><meta property="og:type" content="website"><meta property="og:url" content="https://stock-kabu3.com/api/"><meta property="og:site_name" content="株価アート - Stock Analysis Dashboard"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="API仕様書"><meta name=twitter:description content="株価データAPIの使用方法とサンプルコード"><link rel=icon type=image/svg+xml href=/images/logo.svg><link rel=stylesheet href=/app.css><link rel=canonical href=https://stock-kabu3.com/api/><link rel=alternate type=application/rss+xml title="株価アート - Stock Analysis Dashboard" href=https://stock-kabu3.com/index.xml><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GT-NMCCH26J")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-KEPRP3JDSK"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-KEPRP3JDSK")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8563231513969804" crossorigin=anonymous></script><style>:root{--accent-color:#3b82f6;--accent-color-light:#dbeafe;--accent-color-dark:#1d4ed8;--card-background:#ffffff;--card-text-color-main:#1f2937;--card-text-color-secondary:#6b7280;--card-text-color-tertiary:#9ca3af;--card-separator-color:#e5e7eb;--card-border-radius:8px;--success-color:#10b981;--error-color:#ef4444;--warning-color:#f59e0b;--info-color:#3b82f6}@media(prefers-color-scheme:dark){:root{--card-background:#1f2937;--card-text-color-main:#f3f4f6;--card-text-color-secondary:#d1d5db;--card-text-color-tertiary:#9ca3af;--card-separator-color:#374151}}*{box-sizing:border-box;margin:0;padding:0}body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,helvetica neue,Arial,sans-serif;line-height:1.6;color:#1f2937;background-color:#f9fafb}.container{max-width:1200px;margin:0 auto;padding:0 20px}header{background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.1);position:sticky;top:0;z-index:100}.header-content{display:flex;justify-content:space-between;align-items:center;padding:15px 0}.logo{font-size:1.5rem;font-weight:700;color:#3b82f6;text-decoration:none}nav ul{display:flex;list-style:none;gap:2rem}nav a{color:#6b7280;text-decoration:none;font-weight:500;transition:color .2s}nav a:hover{color:#3b82f6}main{min-height:calc(100vh - 200px);padding:20px 0}footer{background:#1f2937;color:#d1d5db;text-align:center;padding:40px 0;margin-top:60px}.footer-content{max-width:1200px;margin:0 auto;padding:0 20px}.footer-links{display:flex;justify-content:center;gap:2rem;margin-bottom:20px}.footer-links a{color:#9ca3af;text-decoration:none;transition:color .2s}.footer-links a:hover{color:#d1d5db}@media(max-width:768px){.header-content{flex-direction:column;gap:15px}nav ul{gap:1rem}.footer-links{flex-direction:column;gap:1rem}}@media(prefers-color-scheme:dark){body{background-color:#111827;color:#f3f4f6}header{background:#1f2937}nav a{color:#d1d5db}nav a:hover{color:#60a5fa}}</style></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GT-NMCCH26J" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><header><div class=container><div class=header-content><a href=/ class=logo>株価アート - Stock Analysis Dashboard</a><nav><ul><li><a href=/>ダッシュボード</a></li><li><a href=/post/>分析</a></li><li><a href=/categories/>カテゴリ</a></li><li><a href=/investment-guide/>投資ガイド</a></li></ul></nav></div></div></header><main><div class=container><div class=single-page-container><header class=page-header><h1>API仕様書</h1><p class=page-description>株価データAPIの使用方法とサンプルコード</p></header><main class=page-content><h1 id=-株価データapi>🔌 株価データAPI</h1><p>当サイトの株価データをプログラムから利用するためのAPIドキュメントです。</p><h2 id=-利用可能なエンドポイント>📊 利用可能なエンドポイント</h2><h3 id=1-株価一覧api>1. 株価一覧API</h3><pre tabindex=0><code>GET https://stock-kabu3.com/api/stocks/index.json
</code></pre><p>全銘柄の株価データ、テクニカル指標、AI分析結果を取得できます。</p><p><strong>レスポンス例:</strong></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;symbol&#34;</span><span class=p>:</span> <span class=s2>&#34;7203.T&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;トヨタ自動車&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;price&#34;</span><span class=p>:</span> <span class=mf>2834.5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;change&#34;</span><span class=p>:</span> <span class=mf>45.2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;changePercent&#34;</span><span class=p>:</span> <span class=mf>1.62</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;volume&#34;</span><span class=p>:</span> <span class=mi>12450000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;market&#34;</span><span class=p>:</span> <span class=s2>&#34;JP&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;sector&#34;</span><span class=p>:</span> <span class=s2>&#34;自動車&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;indicators&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;rsi&#34;</span><span class=p>:</span> <span class=mf>65.4</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;ma5&#34;</span><span class=p>:</span> <span class=mf>2812.3</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;ma20&#34;</span><span class=p>:</span> <span class=mf>2785.6</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;prediction&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;direction&#34;</span><span class=p>:</span> <span class=s2>&#34;up&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;confidence&#34;</span><span class=p>:</span> <span class=s2>&#34;developing&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><h3 id=2-ダッシュボードサマリーapi>2. ダッシュボードサマリーAPI</h3><pre tabindex=0><code>GET https://stock-kabu3.com/api/summary.json
</code></pre><p>市場概況、トップムーバー、ランキング情報を取得できます。</p><h3 id=3-国際指標api>3. 国際指標API</h3><pre tabindex=0><code>GET https://stock-kabu3.com/api/major_indices.json
</code></pre><p>19の国際指標データを取得できます。</p><h2 id=-実装サンプル3言語>💻 実装サンプル（3言語）</h2><h3 id=python実装例>Python実装例</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>StockAPIClient</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;株価データAPI クライアント&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>BASE_URL</span> <span class=o>=</span> <span class=s2>&#34;https://stock-kabu3.com/api&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_all_stocks</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;全銘柄データを取得&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>url</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>BASE_URL</span><span class=si>}</span><span class=s2>/stocks/index.json&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status_code</span> <span class=o>==</span> <span class=mi>200</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>raise</span> <span class=ne>Exception</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;API Error: </span><span class=si>{</span><span class=n>response</span><span class=o>.</span><span class=n>status_code</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_summary</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;ダッシュボードサマリーを取得&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>url</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=bp>self</span><span class=o>.</span><span class=n>BASE_URL</span><span class=si>}</span><span class=s2>/summary.json&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>filter_by_market</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>market</span><span class=o>=</span><span class=s2>&#34;JP&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;市場別でフィルタリング&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>stocks</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_all_stocks</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>[</span><span class=n>s</span> <span class=k>for</span> <span class=n>s</span> <span class=ow>in</span> <span class=n>stocks</span> <span class=k>if</span> <span class=n>s</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;market&#34;</span><span class=p>)</span> <span class=o>==</span> <span class=n>market</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>get_top_gainers</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>limit</span><span class=o>=</span><span class=mi>10</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;値上がり率上位を取得&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>stocks</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_all_stocks</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>stocks</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>df</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=s2>&#34;changePercent&#34;</span><span class=p>,</span> <span class=n>ascending</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>df</span><span class=o>.</span><span class=n>head</span><span class=p>(</span><span class=n>limit</span><span class=p>)</span><span class=o>.</span><span class=n>to_dict</span><span class=p>(</span><span class=n>orient</span><span class=o>=</span><span class=s2>&#34;records&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 使用例</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>client</span> <span class=o>=</span> <span class=n>StockAPIClient</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 日本株のみ取得</span>
</span></span><span class=line><span class=cl>    <span class=n>jp_stocks</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>filter_by_market</span><span class=p>(</span><span class=s2>&#34;JP&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;日本株: </span><span class=si>{</span><span class=nb>len</span><span class=p>(</span><span class=n>jp_stocks</span><span class=p>)</span><span class=si>}</span><span class=s2>銘柄&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># 値上がり率トップ5</span>
</span></span><span class=line><span class=cl>    <span class=n>top_gainers</span> <span class=o>=</span> <span class=n>client</span><span class=o>.</span><span class=n>get_top_gainers</span><span class=p>(</span><span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>stock</span> <span class=ow>in</span> <span class=n>top_gainers</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>stock</span><span class=p>[</span><span class=s1>&#39;symbol&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=n>stock</span><span class=p>[</span><span class=s1>&#39;changePercent&#39;</span><span class=p>]</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>%&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=javascript-nodejsbrowser-実装例>JavaScript (Node.js/Browser) 実装例</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 株価データAPI クライアント
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>StockAPIClient</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>constructor</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=p>.</span><span class=nx>BASE_URL</span> <span class=o>=</span> <span class=s1>&#39;https://stock-kabu3.com/api&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 全銘柄データを取得
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getAllStocks</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>fetch</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>BASE_URL</span><span class=si>}</span><span class=sb>/stocks/index.json`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>response</span><span class=p>.</span><span class=nx>ok</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`HTTP error! status: </span><span class=si>${</span><span class=nx>response</span><span class=p>.</span><span class=nx>status</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kr>await</span> <span class=nx>response</span><span class=p>.</span><span class=nx>json</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;データ取得エラー:&#39;</span><span class=p>,</span> <span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * ダッシュボードサマリーを取得
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>getSummary</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>response</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>fetch</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>BASE_URL</span><span class=si>}</span><span class=sb>/summary.json`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kr>await</span> <span class=nx>response</span><span class=p>.</span><span class=nx>json</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 市場別フィルタリング
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kr>async</span> <span class=nx>filterByMarket</span><span class=p>(</span><span class=nx>market</span> <span class=o>=</span> <span class=s1>&#39;US&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>stocks</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>getAllStocks</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>stocks</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>s</span> <span class=p>=&gt;</span> <span class=nx>s</span><span class=p>.</span><span class=nx>market</span> <span class=o>===</span> <span class=nx>market</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * リアルタイム監視（ポーリング）
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=nx>startMonitoring</span><span class=p>(</span><span class=nx>symbol</span><span class=p>,</span> <span class=nx>interval</span> <span class=o>=</span> <span class=mi>60000</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`監視開始: </span><span class=si>${</span><span class=nx>symbol</span><span class=si>}</span><span class=sb> (</span><span class=si>${</span><span class=nx>interval</span><span class=o>/</span><span class=mi>1000</span><span class=si>}</span><span class=sb>秒間隔)`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=nx>setInterval</span><span class=p>(</span><span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>stocks</span> <span class=o>=</span> <span class=kr>await</span> <span class=k>this</span><span class=p>.</span><span class=nx>getAllStocks</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=kr>const</span> <span class=nx>target</span> <span class=o>=</span> <span class=nx>stocks</span><span class=p>.</span><span class=nx>find</span><span class=p>(</span><span class=nx>s</span> <span class=p>=&gt;</span> <span class=nx>s</span><span class=p>.</span><span class=nx>symbol</span> <span class=o>===</span> <span class=nx>symbol</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nx>target</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>toLocaleTimeString</span><span class=p>()</span><span class=si>}</span><span class=sb> - </span><span class=si>${</span><span class=nx>symbol</span><span class=si>}</span><span class=sb>: ¥</span><span class=si>${</span><span class=nx>target</span><span class=p>.</span><span class=nx>price</span><span class=si>}</span><span class=sb> (</span><span class=si>${</span><span class=nx>target</span><span class=p>.</span><span class=nx>changePercent</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=o>?</span> <span class=s1>&#39;+&#39;</span> <span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=si>}${</span><span class=nx>target</span><span class=p>.</span><span class=nx>changePercent</span><span class=si>}</span><span class=sb>%)`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span> <span class=nx>interval</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 使用例
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>client</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>StockAPIClient</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 米国株を取得して表示
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>client</span><span class=p>.</span><span class=nx>filterByMarket</span><span class=p>(</span><span class=s1>&#39;US&#39;</span><span class=p>).</span><span class=nx>then</span><span class=p>(</span><span class=nx>usStocks</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`米国株: </span><span class=si>${</span><span class=nx>usStocks</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb>銘柄`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>// 上位5銘柄を表示
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>usStocks</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>sort</span><span class=p>((</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=nx>b</span><span class=p>.</span><span class=nx>changePercent</span> <span class=o>-</span> <span class=nx>a</span><span class=p>.</span><span class=nx>changePercent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>slice</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>stock</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>stock</span><span class=p>.</span><span class=nx>symbol</span><span class=si>}</span><span class=sb>: </span><span class=si>${</span><span class=nx>stock</span><span class=p>.</span><span class=nx>changePercent</span><span class=p>.</span><span class=nx>toFixed</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=si>}</span><span class=sb>%`</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Apple株を60秒ごとに監視
</span></span></span><span class=line><span class=cl><span class=c1>// client.startMonitoring(&#39;AAPL&#39;, 60000);
</span></span></span></code></pre></div><h3 id=java実装例>Java実装例</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>import</span><span class=w> </span><span class=nn>java.io.IOException</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.net.HttpURLConnection</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.net.URL</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.util.*</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.util.stream.Collectors</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>com.google.gson.Gson</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>com.google.gson.reflect.TypeToken</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.io.BufferedReader</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=nn>java.io.InputStreamReader</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 株価データAPIクライアント
</span></span></span><span class=line><span class=cl><span class=cm> */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>public</span><span class=w> </span><span class=kd>class</span> <span class=nc>StockAPIClient</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>BASE_URL</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>&#34;https://stock-kabu3.com/api&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=kd>final</span><span class=w> </span><span class=n>Gson</span><span class=w> </span><span class=n>gson</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>Gson</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 株価データモデル
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kd>class</span> <span class=nc>Stock</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>symbol</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>name</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>double</span><span class=w> </span><span class=n>price</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>double</span><span class=w> </span><span class=n>change</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>double</span><span class=w> </span><span class=n>changePercent</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=kt>long</span><span class=w> </span><span class=n>volume</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>market</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=n>sector</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>Double</span><span class=o>&gt;</span><span class=w> </span><span class=n>indicators</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>String</span><span class=o>&gt;</span><span class=w> </span><span class=n>prediction</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nd>@Override</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=kd>public</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>toString</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>return</span><span class=w> </span><span class=n>String</span><span class=p>.</span><span class=na>format</span><span class=p>(</span><span class=s>&#34;%s (%s): ¥%.2f (%.2f%%)&#34;</span><span class=p>,</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>symbol</span><span class=p>,</span><span class=w> </span><span class=n>price</span><span class=p>,</span><span class=w> </span><span class=n>changePercent</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 全銘柄データを取得
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getAllStocks</span><span class=p>()</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>urlString</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BASE_URL</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;/stocks/index.json&#34;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>jsonResponse</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>fetchData</span><span class=p>(</span><span class=n>urlString</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>gson</span><span class=p>.</span><span class=na>fromJson</span><span class=p>(</span><span class=n>jsonResponse</span><span class=p>,</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>new</span><span class=w> </span><span class=n>TypeToken</span><span class=o>&lt;</span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;&gt;</span><span class=p>(){}.</span><span class=na>getType</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 市場別フィルタリング
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>filterByMarket</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>market</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>allStocks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getAllStocks</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>allStocks</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>filter</span><span class=p>(</span><span class=n>s</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>market</span><span class=p>.</span><span class=na>equals</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=na>market</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 値上がり率上位を取得
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=nf>getTopGainers</span><span class=p>(</span><span class=kt>int</span><span class=w> </span><span class=n>limit</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>allStocks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getAllStocks</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>allStocks</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>sorted</span><span class=p>((</span><span class=n>a</span><span class=p>,</span><span class=w> </span><span class=n>b</span><span class=p>)</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>Double</span><span class=p>.</span><span class=na>compare</span><span class=p>(</span><span class=n>b</span><span class=p>.</span><span class=na>changePercent</span><span class=p>,</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=na>changePercent</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>limit</span><span class=p>(</span><span class=n>limit</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>toList</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * セクター別集計
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=nf>groupBySector</span><span class=p>()</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>allStocks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>getAllStocks</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>allStocks</span><span class=p>.</span><span class=na>stream</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>collect</span><span class=p>(</span><span class=n>Collectors</span><span class=p>.</span><span class=na>groupingBy</span><span class=p>(</span><span class=n>s</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>s</span><span class=p>.</span><span class=na>sector</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * HTTPリクエスト実行
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>private</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=nf>fetchData</span><span class=p>(</span><span class=n>String</span><span class=w> </span><span class=n>urlString</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>IOException</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>URL</span><span class=w> </span><span class=n>url</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>URL</span><span class=p>(</span><span class=n>urlString</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>HttpURLConnection</span><span class=w> </span><span class=n>conn</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>HttpURLConnection</span><span class=p>)</span><span class=w> </span><span class=n>url</span><span class=p>.</span><span class=na>openConnection</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>conn</span><span class=p>.</span><span class=na>setRequestMethod</span><span class=p>(</span><span class=s>&#34;GET&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>conn</span><span class=p>.</span><span class=na>setRequestProperty</span><span class=p>(</span><span class=s>&#34;Accept&#34;</span><span class=p>,</span><span class=w> </span><span class=s>&#34;application/json&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=n>conn</span><span class=p>.</span><span class=na>getResponseCode</span><span class=p>()</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=n>200</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>throw</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>IOException</span><span class=p>(</span><span class=s>&#34;Failed : HTTP error code : &#34;</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=o>+</span><span class=w> </span><span class=n>conn</span><span class=p>.</span><span class=na>getResponseCode</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>BufferedReader</span><span class=w> </span><span class=n>br</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>BufferedReader</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>new</span><span class=w> </span><span class=n>InputStreamReader</span><span class=p>(</span><span class=n>conn</span><span class=p>.</span><span class=na>getInputStream</span><span class=p>(),</span><span class=w> </span><span class=s>&#34;UTF-8&#34;</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>StringBuilder</span><span class=w> </span><span class=n>response</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StringBuilder</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>String</span><span class=w> </span><span class=n>output</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>while</span><span class=w> </span><span class=p>((</span><span class=n>output</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>br</span><span class=p>.</span><span class=na>readLine</span><span class=p>())</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=kc>null</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>response</span><span class=p>.</span><span class=na>append</span><span class=p>(</span><span class=n>output</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>conn</span><span class=p>.</span><span class=na>disconnect</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=n>response</span><span class=p>.</span><span class=na>toString</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * メインメソッド（使用例）
</span></span></span><span class=line><span class=cl><span class=cm>     */</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=kd>public</span><span class=w> </span><span class=kd>static</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>main</span><span class=p>(</span><span class=n>String</span><span class=o>[]</span><span class=w> </span><span class=n>args</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=n>StockAPIClient</span><span class=w> </span><span class=n>client</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>StockAPIClient</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// 日本株を取得</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>jpStocks</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>client</span><span class=p>.</span><span class=na>filterByMarket</span><span class=p>(</span><span class=s>&#34;JP&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;日本株: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>jpStocks</span><span class=p>.</span><span class=na>size</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;銘柄&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// 値上がり率トップ5</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;\n値上がり率トップ5:&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;</span><span class=w> </span><span class=n>topGainers</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>client</span><span class=p>.</span><span class=na>getTopGainers</span><span class=p>(</span><span class=n>5</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=k>for</span><span class=w> </span><span class=p>(</span><span class=n>Stock</span><span class=w> </span><span class=n>stock</span><span class=w> </span><span class=p>:</span><span class=w> </span><span class=n>topGainers</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>stock</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=c1>// セクター別集計</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=s>&#34;\nセクター別銘柄数:&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=p>,</span><span class=w> </span><span class=n>List</span><span class=o>&lt;</span><span class=n>Stock</span><span class=o>&gt;&gt;</span><span class=w> </span><span class=n>bySector</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>client</span><span class=p>.</span><span class=na>groupBySector</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>bySector</span><span class=p>.</span><span class=na>forEach</span><span class=p>((</span><span class=n>sector</span><span class=p>,</span><span class=w> </span><span class=n>stocks</span><span class=p>)</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=n>System</span><span class=p>.</span><span class=na>out</span><span class=p>.</span><span class=na>println</span><span class=p>(</span><span class=n>sector</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;: &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>stocks</span><span class=p>.</span><span class=na>size</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s>&#34;銘柄&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>});</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=n>IOException</span><span class=w> </span><span class=n>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=n>e</span><span class=p>.</span><span class=na>printStackTrace</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><h2 id=-利用規約>📝 利用規約</h2><h3 id=-許可される使用方法>✅ 許可される使用方法</h3><ul><li>個人の分析・研究目的での利用</li><li>教育目的での利用</li><li>非商用アプリケーションでの利用</li></ul><h3 id=-禁止事項>❌ 禁止事項</h3><ul><li>過度なリクエスト（1秒間に10リクエスト以上）</li><li>データの再販売・商用利用</li><li>APIサーバーへの攻撃的なアクセス</li></ul><h2 id=-更新頻度>🔄 更新頻度</h2><ul><li><strong>株価データ</strong>: 日次更新（市場クローズ後）</li><li><strong>国際指標</strong>: 日次更新</li><li><strong>テクニカル指標</strong>: 日次更新</li><li><strong>AI分析</strong>: 日次更新（開発中）</li></ul><h2 id=-注意事項>⚠️ 注意事項</h2><ol><li><strong>CORS対応</strong>: ブラウザから直接アクセス可能</li><li><strong>認証不要</strong>: 現在は認証なしで利用可能</li><li><strong>レート制限</strong>: 将来的に実装予定</li><li><strong>データ遅延</strong>: リアルタイムではなく、遅延データです</li></ol><h2 id=-サポート>🆘 サポート</h2><p>APIに関する質問や問題は、GitHubのIssuesまでお願いします。</p><hr><p><em>このAPIは研究・教育目的で提供されています。投資判断は自己責任でお願いします。</em></p></main><nav class=page-nav><a href=/ class=btn-secondary>← ダッシュボードに戻る</a>
<a href=/stocks/ class=btn-primary>株式一覧を見る</a></nav></div><style>.single-page-container{max-width:1e3px;margin:0 auto;padding:40px 20px;font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,sans-serif;line-height:1.6;color:#333}.page-header{text-align:center;margin-bottom:40px;padding-bottom:20px;border-bottom:2px solid #007acc}.page-header h1{font-size:2.5rem;margin-bottom:10px;color:#333}.page-description{font-size:1.1rem;color:#666;margin:0}.page-content{margin-bottom:40px}.page-content h2{color:#007acc;margin-top:40px;margin-bottom:20px;font-size:1.8rem}.page-content h3{color:#333;margin-top:30px;margin-bottom:15px;font-size:1.4rem}.page-content h4{color:#007acc;margin-top:25px;margin-bottom:12px;font-size:1.2rem}.performance-metrics{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:30px 0}.metric-card{background:#f8f9fa;border-radius:12px;padding:24px;text-align:center;border:1px solid #e9ecef;transition:transform .2s ease,box-shadow .2s ease}.metric-card:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,.1)}.metric-card h4{margin:0 0 12px;color:#007acc;font-size:1.1rem}.metric-value{font-size:2.2rem;font-weight:700;color:#007acc;margin-bottom:8px}.metric-desc{color:#666;font-size:.9rem}.chart-placeholder{background:#fff;border-radius:12px;padding:30px;margin:30px 0;border:1px solid #e9ecef;box-shadow:0 2px 8px rgba(0,0,0,5%)}.chart-placeholder h4{text-align:center;margin-bottom:30px;color:#333}.performance-chart{display:flex;justify-content:center}.chart-bars{display:flex;align-items:end;gap:20px;height:200px}.bar-group{display:flex;flex-direction:column;align-items:center;gap:10px}.bar-group .bar{width:40px;border-radius:4px 4px 0 0;transition:all .3s ease;cursor:pointer}.bar-group .bar:hover{transform:scaleY(1.05);opacity:.8}.bar.ensemble{background:#007acc}.bar.moving-avg{background:#28a745}.bar.linear-reg{background:#ffc107}.bar.momentum{background:#fd7e14}.bar.bollinger{background:#6f42c1}.bar-group label{font-size:.8rem;text-align:center;color:#666;line-height:1.2}.algorithm-details{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:25px;margin:30px 0}.algo-card{background:#fff;border-radius:12px;padding:25px;border:1px solid #e9ecef;position:relative;transition:transform .2s ease,box-shadow .2s ease}.algo-card:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,.1)}.algo-card h4{margin:0 0 12px;color:#007acc;font-size:1.2rem}.algo-accuracy{background:#e8f4fd;color:#007acc;padding:6px 12px;border-radius:6px;font-size:.9rem;font-weight:600;margin-bottom:15px;display:inline-block}.algo-card p{color:#666;margin-bottom:15px;font-size:.95rem}.algo-strength,.algo-weakness{padding:8px 12px;border-radius:6px;margin:8px 0;font-size:.9rem}.algo-strength{background:#d4edda;color:#155724;border-left:4px solid #28a745}.algo-weakness{background:#fff3cd;color:#856404;border-left:4px solid #ffc107}.page-nav{display:flex;justify-content:center;gap:20px;padding-top:30px;border-top:1px solid #e9ecef}.btn-primary,.btn-secondary{display:inline-block;padding:12px 24px;text-decoration:none;border-radius:8px;font-weight:500;transition:all .2s ease;text-align:center}.btn-primary{background:#007acc;color:#fff}.btn-primary:hover{background:#005a99;transform:translateY(-1px)}.btn-secondary{background:0 0;color:#007acc;border:1px solid #007acc}.btn-secondary:hover{background:#e8f4fd}@media(max-width:768px){.single-page-container{padding:20px 15px}.page-header h1{font-size:2rem}.performance-metrics{grid-template-columns:1fr}.algorithm-details{grid-template-columns:1fr}.chart-bars{gap:15px}.bar-group .bar{width:35px}.page-nav{flex-direction:column;align-items:center}}@media(max-width:480px){.chart-bars{gap:10px}.bar-group .bar{width:30px}.bar-group label{font-size:.7rem}}</style></div></main><footer><div class=footer-content><div class=footer-links><a href=/post/>記事一覧</a>
<a href=/categories/>カテゴリ</a>
<a href=/tags/>タグ</a>
<a href=https://stock-kabu3.com/index.xml>RSS</a></div><p>&copy; 2025 株価アート - Stock Analysis Dashboard. All rights reserved.</p><p style=margin-top:10px;font-size:.9rem;color:#9ca3af>株価データは参考情報です。投資判断は自己責任でお願いします。</p></div></footer></body></html>